require=function e(t,n,a){function i(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[r]={exports:{}};t[r][0].call(c.exports,(function(e){var n=t[r][1][e];return i(n||e)}),c,c.exports,e,t,n,a)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<a.length;r++)i(a[r]);return i}({1:[function(e,t,n){
/** @preserve
 *
 * @copyright   Copyright (C) 2017 George S. Kong, All Rights Reserved.
 * Use of this source code is governed by a license that can be found in the LICENSE.txt file.
 */
jQuery=$=e("jquery");var a,i,o,r,s=e("rlite-router");Handlebars=e("handlebars/runtime"),e("bootstrap");const l="dmLastReload";function d(e,t,n){return new Promise((function(n,a){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Dm-Client-Version",i),o.setRequestHeader("Content-type","application/json;charset=UTF-8");var r=document.cookie.replace(/(?:(?:^|.*;\s*)dm_csrf\s*\=\s*([^;]*).*$)|^.*$/,"$1");""!=r&&o.setRequestHeader("Dm-Csrf",r),o.onreadystatechange=c,o.dmresolve=n,o.dmreject=a,o.dmurl=e,o.dmstarttime=performance.now(),o.send(t)}))}function c(){var e,t=performance.now();this.readyState===this.DONE&&("true"===this.getResponseHeader("Dm-Client-Update")&&(o=!0),200===this.status?this.dmresolve(this):(418===this.status?(o=!1,ie("Due to a server software upgrade, this page will now be reloaded."),this.dmhandled=!0):403===this.status?(ie("CSRF error. This page will now be reloaded."),this.dmhandled=!0):401===this.status&&(f(),"/c/verifyOK"!==(e=window.location.pathname)&&"/c/ecdone"!==e&&0!==e.indexOf("/c/pwreset/")&&"/c/testdrive"!==e&&he("/c/login"),this.dmhandled=!0),this.dmreject(this)),a.loggedIn&&function(e,t){var n=ee(e);if(!u[n])return;var a={endpoint:ee(e),timemsec:t},i=new XMLHttpRequest;i.open("POST","/latency",!0),i.setRequestHeader("Content-type","application/json;charset=UTF-8");var o=document.cookie.replace(/(?:(?:^|.*;\s*)dm_csrf\s*\=\s*([^;]*).*$)|^.*$/,"$1");""!=o&&i.setRequestHeader("Dm-Csrf",o);i.send(JSON.stringify(a))}(this.dmurl,Math.floor(t-this.dmstarttime)))}$((function(){(a={}).loggedIn=!1,a.firstName="",a.activities=[],o=!1,$("#dm-client-version").addClass("dm-gone"),i=$("#dm-client-version").text(),r=Handlebars.templates.dialog,Handlebars.registerPartial("signupPartial",Handlebars.templates.partialsignup),Handlebars.registerPartial("versionPartial",Handlebars.templates.partialversion),$("#dm-navbar").html(Handlebars.templates.navbar({})),$("#dm-menu-logout").click((function(){d("/logout","").then((function(){f(),ve("/c/login")}),(function(e){e.dmhandled||b("logout error "+e.status.toString()).then((function(){f(),ve("/c/login")}))}))})),$(".navbar-nav li a.dropdown-item").click((function(){$(".navbar-collapse").collapse("hide")})),$(".navbar-nav li a.collapser").click((function(){$(".navbar-collapse").collapse("hide")})),$("html").on("click, touchend",(function(e){0==$(e.target).closest(".navbar").length&&$(".navbar-collapse").collapse("hide"),0==$(e.target).closest(".dropdown").length&&$(".dropdown-menu").filter(":visible").first().siblings(".dropdown-toggle").dropdown("toggle")}));const e=s(k,{"/":y,"/c/login":D,"/c/signup":S,"/c/pending":O,"/c/verifyOK":N,"/c/forgot":x,"/c/forgotpending":P,"/c/pwreset/:token":C,"/c/home":M,"/c/about":T,"/c/testdrive":q,"/c/help":J,"/c/contact":H,"/c/plans":E,"/c/plandetails/:plan":L,"/c/planday/:plan":A,"/c/version/:plan":Y,"/c/profile":j,"/c/ecpending":K,"/c/ecdone":F,"/c/badprovider":G});var t=window.location.pathname,n=function(e,t){pe;var n;fe=e,window.onclick=$e,window.onpopstate=ye,window.onscroll=we,null!=history.state&&history.state.hasOwnProperty("path")&&history.state.path===window.location.pathname?n=history.state:(history.replaceState({scrollx:window.scrollX,scrolly:window.scrollY,path:window.location.pathname},"",window.location.pathname),n=null);t&&fe(window.location.pathname);return n}(e,!1);d("/getstate","").then((function(e){return a.loggedIn=!0,p(JSON.parse(e.responseText)),e}),(function(e){return e})).then((function(a){window.location.pathname===t&&(e(t),null!=n&&be(n.scrollx,n.scrolly)),h(),v()}))}));var u={login:!0,getdoc:!0,getstate:!0,actadd:!0,actdel:!0,actjump:!0,actver:!0,daychange:!0,accreset:!0,accenab:!0,userget:!0,userset:!0};function m(e,t,n){t.dmhandled||(t.responseText?$(e).html(t.responseText):$(e).html(n+" - error "+t.status.toString()),$(e).show())}function p(e){e.hasOwnProperty("firstname")&&(a.firstName=e.firstname),e.hasOwnProperty("activities")&&(a.activities=e.activities),h()}function f(){a.loggedIn=!1,h()}function h(){a.loggedIn?($("#user-dropdown").html(a.firstName),$("#nav-user-dropdown").removeClass("dm-gone"),$("#nav-login").addClass("dm-gone"),$("#nav-contact").removeClass("dm-gone")):($("#nav-user-dropdown").addClass("dm-gone"),$("#nav-login").removeClass("dm-gone"),$("#nav-contact").addClass("dm-gone"))}function v(){$("#dm-home-visible").length>0&&he("/c/home");var e=new Date,t=1e3*(86400-(60*(60*e.getHours()+e.getMinutes())+e.getSeconds())),n=6e4+Math.floor(19*Math.random()*6e4);setTimeout(v,t+n)}function g(e){$("#main").html(e)}function b(e){return new Promise((function(t){$("#dm-modal").html(Handlebars.templates.modalalert({msg:e})),$(".modal").modal(),$(".modal").on("hidden.bs.modal",(function(){$("#dm-modal").html(""),t()}))}))}function w(e){return new Promise((function(t,n){var a=!1;$("#dm-modal").html(Handlebars.templates.modalconfirm({msg:e})),$("#dm-modal-ok").click((function(){a=!0})),$(".modal").modal(),$(".modal").on("hidden.bs.modal",(function(){$("#dm-modal").html(""),a?t():n()}))}))}function y(){a.loggedIn?he("/c/home"):he("/c/login")}function k(){document.title="Delight/Meditate - page not found",g("<br/><h1>PAGE NOT FOUND</h1>")}function S(){document.title="Delight/Meditate - signup",g(Handlebars.templates.signup({})),$("#signup-alert").hide(),$("#dm-signup-button").click((function(){B()})),$("#dm-login-button").click((function(){he("/c/login")})),$("#dm-signup-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),B())}))}function O(){document.title="Delight/Meditate - email sent",g(r({msg:"You will receive an email shortly. Please follow its instructions, to activate your account."})),$("#dm-dialog-button").addClass("dm-gone")}function N(){document.title="Delight/Meditate - signup complete",g(r({msg:"Your account has been activated and is ready for you to log in!",buttonlabel:"Go to login page"})),$("#dm-dialog-button button").click((function(){he("/c/login")})),$("#dm-dialog-button").removeClass("dm-gone")}function D(){o&&(o=!1,oe("Due to a server software upgrade, this page will now be reloaded.")),document.title="Delight/Meditate - login",g(Handlebars.templates.login({})),$("#login-alert").hide(),$("#dm-about-button").click((function(){he("/c/about")})),$("#dm-test-drive-button").click((function(){he("/c/testdrive")})),$("#dm-login-button").click((function(){U()})),$("#dm-signup-button").click((function(){he("/c/signup")})),$("#dm-login-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),U())}))}function x(){document.title="Delight/Meditate - forgot password",g(Handlebars.templates.forgot({})),$("#forgot-alert").hide(),$("#dm-forgot-button").click((function(){!function(){$("#forgot-alert").hide();var e={email:$("#prEmail").val()};d("/pwforgot",JSON.stringify(e)).then((function(){he("/c/forgotpending")}),(function(e){m("#forgot-alert",e,"password recovery failed")}))}()}))}function P(){document.title="Delight/Meditate - password reset email sent",g(r({msg:"You will receive an email shortly. Please follow its instructions, to reset your password. If you don't see the email, check your spam folder."})),$("#dm-dialog-button").addClass("dm-gone")}function C(e){document.title="Delight/Meditate - password reset";var t=e.token;g(Handlebars.templates.pwreset(t)),$("#pwreset-alert").hide(),$("#dm-button-pwreset").click((function(){!function(){$("#pwreset-alert").hide();var e={token:$("#prToken").val(),password:$("#prPass").val()};d("/dorecover",JSON.stringify(e)).then((function(){b("Your password has been changed. Please log in with your new password.").then((function(){he("/c/login")}))}),(function(e){m("#pwreset-alert",e,"password reset failed")}))}()}))}function T(){document.title="Delight/Meditate - about",g(Handlebars.templates.about({})),a.loggedIn?$(".dm-visitor-only").addClass("dm-gone"):$("#dm-test-drive-button").click((function(){he("/c/testdrive")})),$("#dm-help-button").click((function(){he("/c/help")}))}function J(){document.title="Delight/Meditate - help",g(Handlebars.templates.help({}))}function H(){document.title="Delight/Meditate - contact",g(Handlebars.templates.contact({})),$("#contact-alert").hide(),$("#dm-contact-button").click((function(){!function(){$("#contact-alert").hide();var e={msg:$("#contactText").val()};d("/contact",JSON.stringify(e)).then((function(){b("Your message has been sent.").then((function(){window.history.back()}))}),(function(e){m("#contact-alert",e,"problem sending message")}))}()})),$("#dm-contact-cancel").click((function(){window.history.back()}))}function M(e,t,n,i,s,l,c,u){o&&(o=!1,oe("Due to a server software upgrade, this page will now be reloaded."));var m=!1;if(void 0!==i&&i&&(m=!0),0==a.activities.length)return document.title="Delight/Meditate - home",g(r({msg:"You don't currently have any reading plans.",buttonlabel:"Add a plan"})),$("#dm-dialog-button button").click((function(){he("/c/plans")})),void $("#dm-dialog-button").removeClass("dm-gone");var p=!1;void 0!==u&&(p=!0);var f=[],h=0,v=a.activities.map((function(e){return le("plan",e.plan).then((function(e){var t=JSON.parse(e);return Promise.all(t.streams.map(de))}))}));v.push(le("queries","providers")),Promise.all(v).then((function(){for(var e,t,n,i=JSON.parse(se("queries","providers")),o=0;o<a.activities.length;o++){var r=a.activities[o],v=JSON.parse(se("plan",r.plan));if(r.plantitle=v.title,r.actindex=o,r.status="",r.statusgone="",r.ontrack="",r.accvisible){r.showduedate="Turn off Accountability",r.armenuhide="";var y=(ne()-r.accstartdate+1)*r.day.length-R(r);r.status=y>0?"Readings due now: "+y:0===y?"You are up to date.":"You are ahead by: "+-y,y<=0&&(r.ontrack="dm-panel-ontrack")}else r.showduedate="Turn on Accountability",r.armenuhide="dm-gone",r.statusgone="dm-gone";r.daysleft=Math.ceil((v.days*r.day.length-R(r))/r.day.length),r.readings=[];for(var k=0;k<r.day.length;k++){var S=r.day[k],O=se("stream",v.streams[k]).split("\n"),N=S==v.days+1?"[done]":O[S-1],D={};if(D.plan=r.plan,D.plandays=v.days,D.actindex=o,D.streamindex=k,D.citleft=D.citright=me(N),D.tctxl=D.tctxr="Day "+S,p&&o===s&&k===l){var x="Day "+c+":";"L"===u?(D.citleft=me(O[c-1]),D.tctxl=x):(D.citright=me(O[c-1]),D.tctxr=x)}D.ltriangle=D.rtriangle="dm-triangle",1==S&&(D.ltriangle="dm-triangle-greyed"),S==v.days+1&&(D.rtriangle="dm-triangle-greyed");for(var P=!1,C=0;C<i.providers.length;C++)if(i.providers[C].provider==r.provider){D.citurlindex=h,f[h++]=(e=i.providers[C].url,t=r.version,n=N,void 0,e.replace("{{version}}",t).replace("{{citation}}",n)),P=!0;break}P||(f[h++]="/c/badprovider"),r.readings[k]=D}a.activities[o]=r}if(g(Handlebars.templates.home(a)),m?(document.title="Delight/Meditate - test drive",$(".dm-home-plan-dropdown").remove(),I(),$("#dm-testdrive").removeClass("dm-gone"),$("#dm-testdrive-ok").click((function(){window.history.back()}))):(document.title="Delight/Meditate - home",$(".dm-home-testdrive-dropdown").remove()),$(".dm-cit-left").click((function(){W(f[Number($(this).closest(".dm-citation").prop("id").substr(7))])})),p){var T="";T="L"===u?"dm-wipeleft":"dm-wiperight";var J=$("#dm-cit-L-"+s+"-"+l),H=$("#dm-cit-R-"+s+"-"+l),q=J.clone(!0).addClass(T),E=H.clone(!0).addClass(T);"L"===u&&(q.addClass("dm-noclick"),E.removeClass("dm-noclick"),E.click((function(){W(f[Number($(this).closest(".dm-citation").prop("id").substr(7))])}))),q.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",(function(e){var t;m&&(t=500,new Promise((function(e){setTimeout((function(){e()}),t)}))).then((function(){switch(R(a.activities[0])){case 0:a.testdrivemsg=1;break;case 1:a.testdrivemsg=2;break;default:a.testdrivemsg=3}I()}))})),H.before(E),H.remove(),J.before(q),J.remove();var L=$("#dm-tctx-L-"+s+"-"+l),A=$("#dm-tctx-R-"+s+"-"+l),Y=L.clone(!0).addClass(T),j=A.clone(!0).addClass(T);L.before(Y),L.remove(),A.before(j),A.remove()}$(".dm-acctoggle").click((function(){!function(e){var t=z(e);if(-1===t)return;var n=!a.activities[t].accvisible,i={plan:e,enabled:n};d("/accenab",JSON.stringify(i)).then((function(t){Z(e,t.responseText),M()}),(function(e){e.dmhandled||b("couldn't toggle accountability - "+e.status.toString())}))}($(this).prop("id").substr(13))})),$(".dm-accreset").click((function(){var e;e=$(this).prop("id").substr(12),w("Reset the due dates for this plan, to make your current reading(s) due today?").then((function(){var t={plan:e,today:ne()};d("/accreset",JSON.stringify(t)).then((function(t){Z(e,t.responseText),M()}),(function(e){e.dmhandled||b("couldn't reset accountability - "+e.status.toString())}))}))})),$(".dm-delplan").click((function(){var e;e=$(this).prop("id").substr(11),w("Delete this plan? (If you change your mind, you can add it again at any time.)").then((function(){var t={plan:e};d("/actdel",JSON.stringify(t)).then((function(){var t=z(e);-1!==t&&(a.activities.splice(t,1),ve("/c/home"))}),(function(e){e.dmhandled||b("couldn't delete plan - "+e.status.toString())}))}))})),$(".dm-move").click((function(){var e=$(this).prop("id").split("-"),t="L"===e[1]?-1:1,n=Number(e[2]),i=Number(e[3]),o=Number(e[4]);if(m){var r=a.activities[n].day[i];-1==t&&r>1&&(a.activities[n].day[i]--,M({},{},{},!0,n,i,r,"R")),1==t&&r<=o&&(a.activities[n].day[i]++,M({},{},{},!0,n,i,r,"L"))}else!function(e,t,n){var i=a.activities[e].day[t],o=a.activities[e].plan,r={plan:o,streamindex:t,prevday:i,delta:n,today:ne()};d("/daychange",JSON.stringify(r)).then((function(n){Z(o,n.responseText);var r=a.activities[e].day[t];r===i+1?M({},{},{},!1,e,t,i,"L"):r===i-1?M({},{},{},!1,e,t,i,"R"):M()}),(function(e){e.dmhandled||b("move failed - "+e.status.toString()+" - "+e.responseText)}))}(n,i,t)}))}))}function R(e){for(var t=0,n=0;n<e.day.length;n++)t+=e.day[n]-1;return t}function q(){a.activities=[{plan:"mcheyne-2yr-2perday",day:[1,1],version:"ESV",provider:"BibleGateway.com-PRINT",accstartdate:ne()-1+1,accvisible:!0}],a.testdrivemsg=1,M(0,0,0,!0)}function I(){for(var e=1;e<=3;e++)a.testdrivemsg===e?$("#dm-testdrive-msg-"+e).removeClass("dm-gone"):$("#dm-testdrive-msg-"+e).addClass("dm-gone")}function E(){le("queries","plandescs").then((function(e){var t=JSON.parse(e);if(document.title="Delight/Meditate - plans",g(Handlebars.templates.plans(t)),$(".dm-plan-details-button").click((function(){he("/c/plandetails/"+$(this).prop("id").substr(7))})),a.loggedIn){$(".dm-plan-add-button button").click((function(){var e,t;e=$(this).prop("id").substr(11),t={plan:e,today:ne()},d("/actadd",JSON.stringify(t)).then((function(e){p(JSON.parse(e.responseText)),he("/c/home")}),(function(e){e.dmhandled||b("couldn't add plan - "+e.status.toString())}))}));for(var n=0;n<a.activities.length;n++)$("#pb-"+a.activities[n].plan).addClass("dm-gone")}else $(".dm-plan-add-button").addClass("dm-gone"),$(".dm-plan-login-button").removeClass("dm-gone"),$(".dm-plan-login-button button").click((function(){he("/c/login")}))}))}function L(e){var t,n;le("plan",e.plan).then((function(e){var a=JSON.parse(e);return t=a.days,n=a.title,Promise.all(a.streams.map(de))})).then((function(e){for(var a=[],i=0;i<e.length;i++)a[i]=e[i].split("\n");var o={};o.title=n,o.days=t,o.rows=[];for(var r=0;r<t;r++){var s={};s.day=r+1,s.readings=[];for(var l=0;l<e.length;l++)s.readings[l]=a[l][r];o.rows[r]=s}document.title="Delight/Meditate - plan details",g(Handlebars.templates.plandetails(o)),$("#dm-plandetails-ok").click((function(){window.history.back()}))}))}function A(e){var t=e.plan,n=z(t);-1!==n&&le("plan",t).then((function(e){var i=JSON.parse(e),o={};o.plan=t,o.totaldays=i.days,o.plantitle=i.title,o.day=a.activities[n].day[0];for(var r=1;r<a.activities[n].day.length;r++){var s=a.activities[n].day[r];s<o.day&&(o.day=s)}document.title="Delight/Meditate - jump to a specific day",g(Handlebars.templates.planday(o)),$(".dm-planday").click((function(){X($(this).prop("id").substr(11))})),$("#dm-planday-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),X($(this).find(".dm-planday").prop("id").substr(11)))})),$(".dm-plandet").click((function(){he("/c/plandetails/"+$(this).prop("id").substr(11))})),$("#dm-planday-cancel").click((function(){window.history.back()})),$("#planday-alert").hide()}))}function Y(e){var t=e.plan,n=z(t);-1!==n&&Promise.all([le("plan",t),le("queries","providers")]).then((function(e){var i=JSON.parse(e[0]),o={};o.plan=t,o.plantitle=i.title,o.version=a.activities[n].version,o.choices=Q(e[1],a.activities[n].provider),document.title="Delight/Meditate - change Bible version",g(Handlebars.templates.version(o)),$(".dm-newver").click((function(){_($(this).prop("id").substr(10))})),$("#dm-version-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),_($(this).find(".dm-newver").prop("id").substr(10)))})),$("#dm-newver-cancel").click((function(){window.history.back()})),$("#version-alert").hide()}))}function j(){Promise.all([d("/userget",""),le("queries","providers")]).then((function(e){var t=JSON.parse(e[0].responseText),n={};n.firstname=t.firstname,n.lastname=t.lastname,n.email=t.email,n.version=t.version,n.choices=Q(e[1],t.provider),document.title="Delight/Meditate - profile",g(Handlebars.templates.profile(n)),$("#profile-alert").hide(),$("#dm-user-profile").click((function(){V()})),$("#dm-profile-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),V())})),$("#dm-profile-cancel").click((function(){window.history.back()}))}),(function(e){e[0].dmhandled||(e[0].hasOwnProperty("responseText")?b("profile fetch failed - "+e.responseText):e[0].hasOwnProperty("status")?b("profile fetch failed - "+e.status.toString()):b("profile fetch failed"))}))}function K(){document.title="Delight/Meditate - email change sent",g(r({msg:"You will receive an email shortly. Please follow its instructions, to verify your new email address.",buttonlabel:"OK"})),$("#dm-dialog-button button").click((function(){he("/c/home")})),$("#dm-dialog-button").removeClass("dm-gone")}function F(){document.title="Delight/Meditate - email change completed",g(r({msg:"Your email address change has been confirmed! Please log in with your new email address.",buttonlabel:"Go to login page"})),$("#dm-dialog-button button").click((function(){he("/c/login")})),$("#dm-dialog-button").removeClass("dm-gone")}function G(){document.title="Delight/Meditate - problem with Bible provider",g(r({msg:"There is a problem with this Bible provider. Please click the 3-dot menu for this plan, choose Change Bible Version, and select a new Bible provider.",buttonlabel:"OK"})),$("#dm-dialog-button button").click((function(){window.close()})),$("#dm-dialog-button").removeClass("dm-gone")}function B(){$("#signup-alert").hide();var e={firstname:$("#sfFirst").val(),lastname:$("#sfLast").val(),email:$("#sfEmail").val(),password:$("#sfPass").val()};d("/signup",JSON.stringify(e)).then((function(){ve("/c/pending")}),(function(e){m("#signup-alert",e,"signup failed")}))}function U(){$("#login-alert").hide();var e={email:$("#lfEmail").val(),password:$("#lfPass").val(),keep:$("#lfKeep").is(":checked")};d("/login",JSON.stringify(e)).then((function(e){a.loggedIn=!0,p(JSON.parse(e.responseText)),he("/c/home")}),(function(e){m("#login-alert",e,"login failed")}))}function V(){var e=$("#sfFirst").val(),t={email:$("#sfEmail").val(),oldpass:$("#oldPass").val(),newpass:$("#newPass").val(),firstname:e,lastname:$("#sfLast").val(),version:$("#bvVersion").val(),provider:$("#bvProvider").val()};d("/userset",JSON.stringify(t)).then((function(e){var t=JSON.parse(e.responseText);a.firstName=t.firstname,h(),t.logout&&f(),t.emailsent?he("/c/ecpending"):t.pwchanged?b("Your password has been changed. Please log in with your new password.").then((function(){he("/c/login")})):he("/c/home")}),(function(e){m("#profile-alert",e,"problem updating profile")}))}function X(e){var t={plan:e,day:Number($("#pdfDay").val()),today:ne()};d("/actjump",JSON.stringify(t)).then((function(t){Z(e,t.responseText),window.history.back()}),(function(e){m("#planday-alert",e,"could not change day")}))}function _(e){var t={plan:e,provider:$("#bvProvider").val(),version:$("#bvVersion").val()};d("/actver",JSON.stringify(t)).then((function(){var n=z(e);-1!==n&&(a.activities[n].provider=t.provider,a.activities[n].version=t.version,window.history.back())}),(function(e){m("#version-alert",e,"could not change version")}))}function z(e){for(var t=0;t<a.activities.length;t++)if(a.activities[t].plan===e)return t;return console.log("delightmeditate - actindex("+e+") - not found"),-1}function Z(e,t){var n=JSON.parse(t),i=z(e);if(-1===i)return 0;a.activities[i].day=n.day,a.activities[i].accstartdate=n.accstartdate,a.activities[i].accvisible=n.accvisible}function Q(e,t){for(var n=JSON.parse(e),a=[],i=0;i<n.providers.length;i++)a[i]={},a[i].provider=n.providers[i].provider,a[i].selected="",a[i].provider===t&&(a[i].selected="selected");return a}function W(e){window.open(e,"_blank")}function ee(e){"/"===e.charAt(0)&&(e=e.substr(1));var t=e.indexOf("/");return-1!=t&&(e=e.substr(0,t)),e}function te(){var e=(new Date).getTimezoneOffset();return Math.floor(Date.now()/1e3-60*e)}function ne(){return Math.floor(te()/86400)}function ae(){localStorage.setItem(l,te().toString()),history.replaceState({},"","/"),window.location.reload(!0)}function ie(e){b(e).then((function(){ae()}))}function oe(e){var t=localStorage.getItem(l);if(null!=t){var n=parseInt(t,10);te()-n<3600?b(e).then((function(){ae()})):ae()}else ae()}var re={};function se(e,t){return re[e+"/"+t]}function le(e,t){var n=e+"/"+t,a="exp/"+n;if(re.hasOwnProperty(a)&&re[a]>te()&&re.hasOwnProperty(n))return Promise.resolve(re[n]);var o,r=localStorage.getItem(a);if(null!=r&&Number(r)>te()){var s=localStorage.getItem(n);if(null!=s)return re[n]=s,re[a]=Number(r),Promise.resolve(s)}return(o="/getdoc/"+e+"/"+t,new Promise((function(e,t){var n=new XMLHttpRequest;n.open("GET",o),n.setRequestHeader("Dm-Client-Version",i),n.onreadystatechange=c,n.dmresolve=e,n.dmreject=t,n.dmurl=o,n.dmstarttime=performance.now(),n.send()}))).then((function(e){var t=JSON.parse(e.responseText),i=t.ttl+te();return localStorage.setItem(n,t.data),localStorage.setItem(a,i.toString()),re[n]=t.data,re[a]=i,t.data}),(function(e){return e.dmhandled?"":b("doc not found - "+n+" - "+e.status.toString()).then((function(){return""}))}))}function de(e){return le("stream",e)}var ce=["1Chronicles","1Corinthians","1John","1Kings","1Peter","1Samuel","1Thess","1Timothy","2Chronicles","2Corinthians","2John","2Kings","2Peter","2Samuel","2Thess","2Timothy","3John","Acts","Amos","Colossians","Daniel","Deuteronomy","Ecclesiastes","Ephesians","Esther","Exodus","Ezekiel","Ezra","Galatians","Genesis","Habakkuk","Haggai","Hebrews","Hosea","Isaiah","James","Jeremiah","Job","Joel","John","Jonah","Joshua","Jude","Judges","Lamentations","Leviticus","Luke","Malachi","Mark","Matthew","Micah","Nahum","Nehemiah","Numbers","Obadiah","Philippians","Philemon","Proverbs","Psalm","Revelation","Romans","Ruth","Song","Titus","Zechariah","Zephaniah"];function ue(e){for(var t=0;t<ce.length;t++)if(0===ce[t].lastIndexOf(e,0))return ce[t];return e}function me(e){var t=e.indexOf(" ");return-1===t?ue(e):ue(e.slice(0,t))+"<br/>"+e.slice(t+1)}var pe=!1;var fe;function he(e){ge(),history.pushState({scrollx:0,scrolly:0,path:e},"",e),window.scrollTo(0,0),fe(e)}function ve(e){history.replaceState({scrollx:0,scrolly:0,path:e},"",e),window.scrollTo(0,0),fe(e)}function ge(){history.replaceState({scrollx:window.scrollX,scrolly:window.scrollY,path:history.state.path},"",history.state.path)}function be(e,t){var n=Date.now();!function a(){window.scrollTo(e,t),window.scrollX===e&&window.scrollY===t||Date.now()-n>5e3||setTimeout(a,50)}()}function we(){window.onscroll=null,setTimeout((function(){ge(),window.onscroll=we}),100)}function ye(e){fe(e.state.path),be(e.state.scrollx,e.state.scrolly)}function $e(e){if(!e.defaultPrevented&&1===function(e){return e=e||window.event,null===e.which?e.button:e.which}(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName&&!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var n=t.getAttribute("href");n&&n.indexOf("mailto:")>-1||t.target||function(e){var t=location.protocol+"//"+location.hostname;location.port&&(t+=":"+location.port);return e&&0===e.indexOf(t)}(t.href)&&(e.preventDefault(),he(t.pathname))}}}},{bootstrap:3,"handlebars/runtime":4,jquery:25,"rlite-router":27}]},{},[1]);