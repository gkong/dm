require=function e(t,n,i){function a(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[r]={exports:{}};t[r][0].call(c.exports,(function(e){var n=t[r][1][e];return a(n||e)}),c,c.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(e,t,n){
/** @preserve
 *
 * @copyright   Copyright (C) 2017 George S. Kong, All Rights Reserved.
 * Use of this source code is governed by a license that can be found in the LICENSE.txt file.
 */
jQuery=$=e("jquery");var i=e("rlite-router");Handlebars=e("handlebars/runtime"),e("bootstrap");var a,o,r,s,l=e("spa-components");const d="dmLastReload";function c(e,t,n){e.setRequestHeader("Dm-Client-Version",o);var i=document.cookie.replace(/(?:(?:^|.*;\s*)dm_csrf\s*\=\s*([^;]*).*$)|^.*$/,"$1");""!=i&&e.setRequestHeader("Dm-Csrf",i);performance.now();e.myXhrStartTime=performance.now()}function u(e,t,n){"true"===e.getResponseHeader("Dm-Client-Update")&&(r=!0)}function m(e,t,n){var i;u(e),418===e.status?(r=!1,de("Due to a server software upgrade, this page will now be reloaded."),e.dmhandled=!0):403===e.status?(de("CSRF error. This page will now be reloaded."),e.dmhandled=!0):401===e.status&&(y(),"/c/verifyOK"!==(i=window.location.pathname)&&"/c/ecdone"!==i&&0!==i.indexOf("/c/pwreset/")&&"/c/testdrive"!==i&&l.visit("/c/login"),e.dmhandled=!0)}function p(e,t,n){var i=performance.now();a.loggedIn&&function(e,t){var n=oe(e);if(!g[n])return;var i={endpoint:oe(e),timemsec:t},a=new XMLHttpRequest;a.open("POST","/latency",!0),a.setRequestHeader("Content-type","application/json;charset=UTF-8");var o=document.cookie.replace(/(?:(?:^|.*;\s*)dm_csrf\s*\=\s*([^;]*).*$)|^.*$/,"$1");""!=o&&a.setRequestHeader("Dm-Csrf",o);a.send(JSON.stringify(i))}(n,Math.floor(i-e.myXhrStartTime))}$((function(){(a={}).loggedIn=!1,a.firstName="",a.activities=[],r=!1,$("#dm-client-version").addClass("dm-gone"),o=$("#dm-client-version").text(),s=Handlebars.templates.dialog,Handlebars.registerPartial("signupPartial",Handlebars.templates.partialsignup),Handlebars.registerPartial("versionPartial",Handlebars.templates.partialversion),$("#dm-navbar").html(Handlebars.templates.navbar({})),$("#dm-menu-logout").click((function(){v("/logout","").then((function(){y(),l.replace("/c/login")}),(function(e){e.dmhandled||O("logout error "+e.status.toString()).then((function(){y(),l.replace("/c/login")}))}))})),$(".navbar-nav li a.dropdown-item").click((function(){$(".navbar-collapse").collapse("hide")})),$(".navbar-nav li a.collapser").click((function(){$(".navbar-collapse").collapse("hide")})),$("html").on("click, touchend",(function(e){0==$(e.target).closest(".navbar").length&&$(".navbar-collapse").collapse("hide"),0==$(e.target).closest(".dropdown").length&&$(".dropdown-menu").filter(":visible").first().siblings(".dropdown-toggle").dropdown("toggle")}));const e=i(D,{"/":C,"/c/login":T,"/c/signup":P,"/c/pending":J,"/c/verifyOK":x,"/c/forgot":M,"/c/forgotpending":H,"/c/pwreset/:token":I,"/c/home":L,"/c/about":R,"/c/testdrive":A,"/c/help":q,"/c/contact":E,"/c/plans":j,"/c/plandetails/:plan":G,"/c/planday/:plan":K,"/c/version/:plan":B,"/c/profile":U,"/c/ecpending":V,"/c/ecdone":_,"/c/badprovider":z});var t=window.location.pathname,n=l.init({router:e,logging:!1});v("/getstate","").then((function(e){return a.loggedIn=!0,b(JSON.parse(e.responseText)),e}),(function(e){return e})).then((function(i){window.location.pathname===t&&(e(t),null!=n&&l.scrollTo(n.scrollx,n.scrolly)),w(),k()}))}));var f=l.httpReqFunc("GET",c,u,m,p),v=l.httpReqFunc("POST",(function(e,t,n){c(e),e.setRequestHeader("Content-type","application/json;charset=UTF-8")}),u,m,p);var g={login:!0,getdoc:!0,getstate:!0,actadd:!0,actdel:!0,actjump:!0,actver:!0,daychange:!0,accreset:!0,accenab:!0,userget:!0,userset:!0};function h(e,t,n){t.dmhandled||(t.responseText?$(e).html(t.responseText):$(e).html(n+" - error "+t.status.toString()),$(e).show())}function b(e){e.hasOwnProperty("firstname")&&(a.firstName=e.firstname),e.hasOwnProperty("activities")&&(a.activities=e.activities),w()}function y(){a.loggedIn=!1,w()}function w(){a.loggedIn?($("#user-dropdown").html(a.firstName),$("#nav-user-dropdown").removeClass("dm-gone"),$("#nav-login").addClass("dm-gone"),$("#nav-contact").removeClass("dm-gone")):($("#nav-user-dropdown").addClass("dm-gone"),$("#nav-login").removeClass("dm-gone"),$("#nav-contact").addClass("dm-gone"))}function k(){$("#dm-home-visible").length>0&&l.visit("/c/home");var e=new Date,t=1e3*(86400-(60*(60*e.getHours()+e.getMinutes())+e.getSeconds())),n=6e4+Math.floor(19*Math.random()*6e4);setTimeout(k,t+n)}function S(e){$("#main").html(e)}function O(e){return new Promise((function(t){$("#dm-modal").html(Handlebars.templates.modalalert({msg:e})),$(".modal").modal(),$(".modal").on("hidden.bs.modal",(function(){$("#dm-modal").html(""),t()}))}))}function N(e){return new Promise((function(t,n){var i=!1;$("#dm-modal").html(Handlebars.templates.modalconfirm({msg:e})),$("#dm-modal-ok").click((function(){i=!0})),$(".modal").modal(),$(".modal").on("hidden.bs.modal",(function(){$("#dm-modal").html(""),i?t():n()}))}))}function C(){a.loggedIn?l.visit("/c/home"):l.visit("/c/login")}function D(){document.title="Delight/Meditate - page not found",S("<br/><h1>PAGE NOT FOUND</h1>")}function P(){document.title="Delight/Meditate - signup",S(Handlebars.templates.signup({})),$("#signup-alert").hide(),$("#dm-signup-button").click((function(){X()})),$("#dm-login-button").click((function(){l.visit("/c/login")})),$("#dm-signup-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),X())}))}function J(){document.title="Delight/Meditate - email sent",S(s({msg:"You will receive an email shortly. Please follow its instructions, to activate your account."})),$("#dm-dialog-button").addClass("dm-gone")}function x(){document.title="Delight/Meditate - signup complete",S(s({msg:"Your account has been activated and is ready for you to log in!",buttonlabel:"Go to login page"})),$("#dm-dialog-button button").click((function(){l.visit("/c/login")})),$("#dm-dialog-button").removeClass("dm-gone")}function T(){r&&(r=!1,ce("Due to a server software upgrade, this page will now be reloaded.")),document.title="Delight/Meditate - login",S(Handlebars.templates.login({})),$("#login-alert").hide(),$("#dm-about-button").click((function(){l.visit("/c/about")})),$("#dm-test-drive-button").click((function(){l.visit("/c/testdrive")})),$("#dm-login-button").click((function(){Z()})),$("#dm-signup-button").click((function(){l.visit("/c/signup")})),$("#dm-login-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),Z())}))}function M(){document.title="Delight/Meditate - forgot password",S(Handlebars.templates.forgot({})),$("#forgot-alert").hide(),$("#dm-forgot-button").click((function(){!function(){$("#forgot-alert").hide();var e={email:$("#prEmail").val()};v("/pwforgot",JSON.stringify(e)).then((function(){l.visit("/c/forgotpending")}),(function(e){h("#forgot-alert",e,"password recovery failed")}))}()}))}function H(){document.title="Delight/Meditate - password reset email sent",S(s({msg:"You will receive an email shortly. Please follow its instructions, to reset your password. If you don't see the email, check your spam folder."})),$("#dm-dialog-button").addClass("dm-gone")}function I(e){document.title="Delight/Meditate - password reset";var t=e.token;S(Handlebars.templates.pwreset(t)),$("#pwreset-alert").hide(),$("#dm-button-pwreset").click((function(){!function(){$("#pwreset-alert").hide();var e={token:$("#prToken").val(),password:$("#prPass").val()};v("/dorecover",JSON.stringify(e)).then((function(){O("Your password has been changed. Please log in with your new password.").then((function(){l.visit("/c/login")}))}),(function(e){h("#pwreset-alert",e,"password reset failed")}))}()}))}function R(){document.title="Delight/Meditate - about",S(Handlebars.templates.about({})),a.loggedIn?$(".dm-visitor-only").addClass("dm-gone"):$("#dm-test-drive-button").click((function(){l.visit("/c/testdrive")})),$("#dm-help-button").click((function(){l.visit("/c/help")}))}function q(){document.title="Delight/Meditate - help",S(Handlebars.templates.help({}))}function E(){document.title="Delight/Meditate - contact",S(Handlebars.templates.contact({})),$("#contact-alert").hide(),$("#dm-contact-button").click((function(){!function(){$("#contact-alert").hide();var e={msg:$("#contactText").val()};v("/contact",JSON.stringify(e)).then((function(){O("Your message has been sent.").then((function(){window.history.back()}))}),(function(e){h("#contact-alert",e,"problem sending message")}))}()})),$("#dm-contact-cancel").click((function(){window.history.back()}))}function L(e,t,n,i,o,d,c,u){r&&(r=!1,ce("Due to a server software upgrade, this page will now be reloaded."));var m=!1;if(void 0!==i&&i&&(m=!0),0==a.activities.length)return document.title="Delight/Meditate - home",S(s({msg:"You don't currently have any reading plans.",buttonlabel:"Add a plan"})),$("#dm-dialog-button button").click((function(){l.visit("/c/plans")})),void $("#dm-dialog-button").removeClass("dm-gone");var p=!1;void 0!==u&&(p=!0);var f=[],g=0,h=a.activities.map((function(e){return pe("plan",e.plan).then((function(e){var t=JSON.parse(e);return Promise.all(t.streams.map(fe))}))}));h.push(pe("queries","providers")),Promise.all(h).then((function(){for(var e,t,n,i=JSON.parse(me("queries","providers")),r=0;r<a.activities.length;r++){var s=a.activities[r],h=JSON.parse(me("plan",s.plan));if(s.plantitle=h.title,s.actindex=r,s.status="",s.statusgone="",s.ontrack="",s.accvisible){s.showduedate="Turn off Accountability",s.armenuhide="";var b=(se()-s.accstartdate+1)*s.day.length-Y(s);s.status=b>0?"Readings due now: "+b:0===b?"You are up to date.":"You are ahead by: "+-b,b<=0&&(s.ontrack="dm-panel-ontrack")}else s.showduedate="Turn on Accountability",s.armenuhide="dm-gone",s.statusgone="dm-gone";s.daysleft=Math.ceil((h.days*s.day.length-Y(s))/s.day.length),s.readings=[];for(var y=0;y<s.day.length;y++){var w=s.day[y],k=me("stream",h.streams[y]).split("\n"),C=w==h.days+1?"[done]":k[w-1],D={};if(D.plan=s.plan,D.plandays=h.days,D.actindex=r,D.streamindex=y,D.citleft=D.citright=he(C),D.tctxl=D.tctxr="Day "+w,p&&r===o&&y===d){var P="Day "+c+":";"L"===u?(D.citleft=he(k[c-1]),D.tctxl=P):(D.citright=he(k[c-1]),D.tctxr=P)}D.ltriangle=D.rtriangle="dm-triangle",1==w&&(D.ltriangle="dm-triangle-greyed"),w==h.days+1&&(D.rtriangle="dm-triangle-greyed");for(var J=!1,x=0;x<i.providers.length;x++)if(i.providers[x].provider==s.provider){D.citurlindex=g,f[g++]=(e=i.providers[x].url,t=s.version,n=C,void 0,e.replace("{{version}}",t).replace("{{citation}}",n)),J=!0;break}J||(f[g++]="/c/badprovider"),s.readings[y]=D}a.activities[r]=s}if(S(Handlebars.templates.home(a)),m?(document.title="Delight/Meditate - test drive",$(".dm-home-plan-dropdown").remove(),F(),$("#dm-testdrive").removeClass("dm-gone"),$("#dm-testdrive-ok").click((function(){window.history.back()}))):(document.title="Delight/Meditate - home",$(".dm-home-testdrive-dropdown").remove()),$(".dm-cit-left").click((function(){ae(f[Number($(this).closest(".dm-citation").prop("id").substr(7))])})),p){var T="";T="L"===u?"dm-wipeleft":"dm-wiperight";var M=$("#dm-cit-L-"+o+"-"+d),H=$("#dm-cit-R-"+o+"-"+d),I=M.clone(!0).addClass(T),R=H.clone(!0).addClass(T);"L"===u&&(I.addClass("dm-noclick"),R.removeClass("dm-noclick"),R.click((function(){ae(f[Number($(this).closest(".dm-citation").prop("id").substr(7))])}))),I.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",(function(e){var t;m&&(t=500,new Promise((function(e){setTimeout((function(){e()}),t)}))).then((function(){switch(Y(a.activities[0])){case 0:a.testdrivemsg=1;break;case 1:a.testdrivemsg=2;break;default:a.testdrivemsg=3}F()}))})),H.before(R),H.remove(),M.before(I),M.remove();var q=$("#dm-tctx-L-"+o+"-"+d),E=$("#dm-tctx-R-"+o+"-"+d),A=q.clone(!0).addClass(T),j=E.clone(!0).addClass(T);q.before(A),q.remove(),E.before(j),E.remove()}$(".dm-acctoggle").click((function(){!function(e){var t=te(e);if(-1===t)return;var n=!a.activities[t].accvisible,i={plan:e,enabled:n};v("/accenab",JSON.stringify(i)).then((function(t){ne(e,t.responseText),L()}),(function(e){e.dmhandled||O("couldn't toggle accountability - "+e.status.toString())}))}($(this).prop("id").substr(13))})),$(".dm-accreset").click((function(){var e;e=$(this).prop("id").substr(12),N("Reset the due dates for this plan, to make your current reading(s) due today?").then((function(){var t={plan:e,today:se()};v("/accreset",JSON.stringify(t)).then((function(t){ne(e,t.responseText),L()}),(function(e){e.dmhandled||O("couldn't reset accountability - "+e.status.toString())}))}))})),$(".dm-delplan").click((function(){var e;e=$(this).prop("id").substr(11),N("Delete this plan? (If you change your mind, you can add it again at any time.)").then((function(){var t={plan:e};v("/actdel",JSON.stringify(t)).then((function(){var t=te(e);-1!==t&&(a.activities.splice(t,1),l.replace("/c/home"))}),(function(e){e.dmhandled||O("couldn't delete plan - "+e.status.toString())}))}))})),$(".dm-move").click((function(){var e=$(this).prop("id").split("-"),t="L"===e[1]?-1:1,n=Number(e[2]),i=Number(e[3]),o=Number(e[4]);if(m){var r=a.activities[n].day[i];-1==t&&r>1&&(a.activities[n].day[i]--,L({},{},{},!0,n,i,r,"R")),1==t&&r<=o&&(a.activities[n].day[i]++,L({},{},{},!0,n,i,r,"L"))}else!function(e,t,n){var i=a.activities[e].day[t],o=a.activities[e].plan,r={plan:o,streamindex:t,prevday:i,delta:n,today:se()};v("/daychange",JSON.stringify(r)).then((function(n){ne(o,n.responseText);var r=a.activities[e].day[t];r===i+1?L({},{},{},!1,e,t,i,"L"):r===i-1?L({},{},{},!1,e,t,i,"R"):L()}),(function(e){e.dmhandled||O("move failed - "+e.status.toString()+" - "+e.responseText)}))}(n,i,t)}))}))}function Y(e){for(var t=0,n=0;n<e.day.length;n++)t+=e.day[n]-1;return t}function A(){a.activities=[{plan:"mcheyne-2yr-2perday",day:[1,1],version:"ESV",provider:"BibleGateway.com-PRINT",accstartdate:se()-1+1,accvisible:!0}],a.testdrivemsg=1,L(0,0,0,!0)}function F(){for(var e=1;e<=3;e++)a.testdrivemsg===e?$("#dm-testdrive-msg-"+e).removeClass("dm-gone"):$("#dm-testdrive-msg-"+e).addClass("dm-gone")}function j(){pe("queries","plandescs").then((function(e){var t=JSON.parse(e);if(document.title="Delight/Meditate - plans",S(Handlebars.templates.plans(t)),$(".dm-plan-details-button").click((function(){l.visit("/c/plandetails/"+$(this).prop("id").substr(7))})),a.loggedIn){$(".dm-plan-add-button button").click((function(){var e,t;e=$(this).prop("id").substr(11),t={plan:e,today:se()},v("/actadd",JSON.stringify(t)).then((function(e){b(JSON.parse(e.responseText)),l.visit("/c/home")}),(function(e){e.dmhandled||O("couldn't add plan - "+e.status.toString())}))}));for(var n=0;n<a.activities.length;n++)$("#pb-"+a.activities[n].plan).addClass("dm-gone")}else $(".dm-plan-add-button").addClass("dm-gone"),$(".dm-plan-login-button").removeClass("dm-gone"),$(".dm-plan-login-button button").click((function(){l.visit("/c/login")}))}))}function G(e){var t,n;pe("plan",e.plan).then((function(e){var i=JSON.parse(e);return t=i.days,n=i.title,Promise.all(i.streams.map(fe))})).then((function(e){for(var i=[],a=0;a<e.length;a++)i[a]=e[a].split("\n");var o={};o.title=n,o.days=t,o.rows=[];for(var r=0;r<t;r++){var s={};s.day=r+1,s.readings=[];for(var l=0;l<e.length;l++)s.readings[l]=i[l][r];o.rows[r]=s}document.title="Delight/Meditate - plan details",S(Handlebars.templates.plandetails(o)),$("#dm-plandetails-ok").click((function(){window.history.back()}))}))}function K(e){var t=e.plan,n=te(t);-1!==n&&pe("plan",t).then((function(e){var i=JSON.parse(e),o={};o.plan=t,o.totaldays=i.days,o.plantitle=i.title,o.day=a.activities[n].day[0];for(var r=1;r<a.activities[n].day.length;r++){var s=a.activities[n].day[r];s<o.day&&(o.day=s)}document.title="Delight/Meditate - jump to a specific day",S(Handlebars.templates.planday(o)),$(".dm-planday").click((function(){W($(this).prop("id").substr(11))})),$("#dm-planday-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),W($(this).find(".dm-planday").prop("id").substr(11)))})),$(".dm-plandet").click((function(){l.visit("/c/plandetails/"+$(this).prop("id").substr(11))})),$("#dm-planday-cancel").click((function(){window.history.back()})),$("#planday-alert").hide()}))}function B(e){var t=e.plan,n=te(t);-1!==n&&Promise.all([pe("plan",t),pe("queries","providers")]).then((function(e){var i=JSON.parse(e[0]),o={};o.plan=t,o.plantitle=i.title,o.version=a.activities[n].version,o.choices=ie(e[1],a.activities[n].provider),document.title="Delight/Meditate - change Bible version",S(Handlebars.templates.version(o)),$(".dm-newver").click((function(){ee($(this).prop("id").substr(10))})),$("#dm-version-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),ee($(this).find(".dm-newver").prop("id").substr(10)))})),$("#dm-newver-cancel").click((function(){window.history.back()})),$("#version-alert").hide()}))}function U(){Promise.all([v("/userget",""),pe("queries","providers")]).then((function(e){var t=JSON.parse(e[0].responseText),n={};n.firstname=t.firstname,n.lastname=t.lastname,n.email=t.email,n.version=t.version,n.choices=ie(e[1],t.provider),document.title="Delight/Meditate - profile",S(Handlebars.templates.profile(n)),$("#profile-alert").hide(),$("#dm-user-profile").click((function(){Q()})),$("#dm-profile-panel").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),Q())})),$("#dm-profile-cancel").click((function(){window.history.back()}))}),(function(e){e[0].dmhandled||(e[0].hasOwnProperty("responseText")?O("profile fetch failed - "+e.responseText):e[0].hasOwnProperty("status")?O("profile fetch failed - "+e.status.toString()):O("profile fetch failed"))}))}function V(){document.title="Delight/Meditate - email change sent",S(s({msg:"You will receive an email shortly. Please follow its instructions, to verify your new email address.",buttonlabel:"OK"})),$("#dm-dialog-button button").click((function(){l.visit("/c/home")})),$("#dm-dialog-button").removeClass("dm-gone")}function _(){document.title="Delight/Meditate - email change completed",S(s({msg:"Your email address change has been confirmed! Please log in with your new email address.",buttonlabel:"Go to login page"})),$("#dm-dialog-button button").click((function(){l.visit("/c/login")})),$("#dm-dialog-button").removeClass("dm-gone")}function z(){document.title="Delight/Meditate - problem with Bible provider",S(s({msg:"There is a problem with this Bible provider. Please click the 3-dot menu for this plan, choose Change Bible Version, and select a new Bible provider.",buttonlabel:"OK"})),$("#dm-dialog-button button").click((function(){window.close()})),$("#dm-dialog-button").removeClass("dm-gone")}function X(){$("#signup-alert").hide();var e={firstname:$("#sfFirst").val(),lastname:$("#sfLast").val(),email:$("#sfEmail").val(),password:$("#sfPass").val()};v("/signup",JSON.stringify(e)).then((function(){l.replace("/c/pending")}),(function(e){h("#signup-alert",e,"signup failed")}))}function Z(){$("#login-alert").hide();var e={email:$("#lfEmail").val(),password:$("#lfPass").val(),keep:$("#lfKeep").is(":checked")};v("/login",JSON.stringify(e)).then((function(e){a.loggedIn=!0,b(JSON.parse(e.responseText)),l.visit("/c/home")}),(function(e){h("#login-alert",e,"login failed")}))}function Q(){var e=$("#sfFirst").val(),t={email:$("#sfEmail").val(),oldpass:$("#oldPass").val(),newpass:$("#newPass").val(),firstname:e,lastname:$("#sfLast").val(),version:$("#bvVersion").val(),provider:$("#bvProvider").val()};v("/userset",JSON.stringify(t)).then((function(e){var t=JSON.parse(e.responseText);a.firstName=t.firstname,w(),t.logout&&y(),t.emailsent?l.visit("/c/ecpending"):t.pwchanged?O("Your password has been changed. Please log in with your new password.").then((function(){l.visit("/c/login")})):l.visit("/c/home")}),(function(e){h("#profile-alert",e,"problem updating profile")}))}function W(e){var t={plan:e,day:Number($("#pdfDay").val()),today:se()};v("/actjump",JSON.stringify(t)).then((function(t){ne(e,t.responseText),window.history.back()}),(function(e){h("#planday-alert",e,"could not change day")}))}function ee(e){var t={plan:e,provider:$("#bvProvider").val(),version:$("#bvVersion").val()};v("/actver",JSON.stringify(t)).then((function(){var n=te(e);-1!==n&&(a.activities[n].provider=t.provider,a.activities[n].version=t.version,window.history.back())}),(function(e){h("#version-alert",e,"could not change version")}))}function te(e){for(var t=0;t<a.activities.length;t++)if(a.activities[t].plan===e)return t;return console.log("delightmeditate - actindex("+e+") - not found"),-1}function ne(e,t){var n=JSON.parse(t),i=te(e);if(-1===i)return 0;a.activities[i].day=n.day,a.activities[i].accstartdate=n.accstartdate,a.activities[i].accvisible=n.accvisible}function ie(e,t){for(var n=JSON.parse(e),i=[],a=0;a<n.providers.length;a++)i[a]={},i[a].provider=n.providers[a].provider,i[a].selected="",i[a].provider===t&&(i[a].selected="selected");return i}function ae(e){window.open(e,"_blank")}function oe(e){"/"===e.charAt(0)&&(e=e.substr(1));var t=e.indexOf("/");return-1!=t&&(e=e.substr(0,t)),e}function re(){var e=(new Date).getTimezoneOffset();return Math.floor(Date.now()/1e3-60*e)}function se(){return Math.floor(re()/86400)}function le(){localStorage.setItem(d,re().toString()),history.replaceState({},"","/"),window.location.reload(!0)}function de(e){O(e).then((function(){le()}))}function ce(e){var t=localStorage.getItem(d);if(null!=t){var n=parseInt(t,10);re()-n<3600?O(e).then((function(){le()})):le()}else le()}var ue={};function me(e,t){return ue[e+"/"+t]}function pe(e,t){var n=e+"/"+t,i="exp/"+n;if(ue.hasOwnProperty(i)&&ue[i]>re()&&ue.hasOwnProperty(n))return Promise.resolve(ue[n]);var a=localStorage.getItem(i);if(null!=a&&Number(a)>re()){var o=localStorage.getItem(n);if(null!=o)return ue[n]=o,ue[i]=Number(a),Promise.resolve(o)}return f("/getdoc/"+e+"/"+t).then((function(e){var t=JSON.parse(e.responseText),a=t.ttl+re();return localStorage.setItem(n,t.data),localStorage.setItem(i,a.toString()),ue[n]=t.data,ue[i]=a,t.data}),(function(e){return e.dmhandled?"":O("doc not found - "+n+" - "+e.status.toString()).then((function(){return""}))}))}function fe(e){return pe("stream",e)}var ve=["1Chronicles","1Corinthians","1John","1Kings","1Peter","1Samuel","1Thess","1Timothy","2Chronicles","2Corinthians","2John","2Kings","2Peter","2Samuel","2Thess","2Timothy","3John","Acts","Amos","Colossians","Daniel","Deuteronomy","Ecclesiastes","Ephesians","Esther","Exodus","Ezekiel","Ezra","Galatians","Genesis","Habakkuk","Haggai","Hebrews","Hosea","Isaiah","James","Jeremiah","Job","Joel","John","Jonah","Joshua","Jude","Judges","Lamentations","Leviticus","Luke","Malachi","Mark","Matthew","Micah","Nahum","Nehemiah","Numbers","Obadiah","Philippians","Philemon","Proverbs","Psalm","Revelation","Romans","Ruth","Song","Titus","Zechariah","Zephaniah"];function ge(e){for(var t=0;t<ve.length;t++)if(0===ve[t].lastIndexOf(e,0))return ve[t];return e}function he(e){var t=e.indexOf(" ");return-1===t?ge(e):ge(e.slice(0,t))+"<br/>"+e.slice(t+1)}},{bootstrap:3,"handlebars/runtime":4,jquery:25,"rlite-router":27,"spa-components":28}]},{},[1]);