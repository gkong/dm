require=function e(t,n,a){function o(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){var n=t[r][1][e];return o(n||e)},d,d.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)o(a[r]);return o}({1:[function(e,t,n){
/** @preserve
 *
 * @copyright   Copyright (C) 2017 George S. Kong, All Rights Reserved.
 */
jQuery=$=e("jquery");var a=e("rlite-router");Handlebars=e("handlebars/runtime");var o,i,r,s,l=e("es6-promise").Promise;Tether=e("tether"),e("bootstrap");const c="dmLastReload";function d(e,t,n){return new l(function(n,a){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Dm-Client-Version",i),o.setRequestHeader("Content-type","application/json;charset=UTF-8");var r=document.cookie.replace(/(?:(?:^|.*;\s*)dm_csrf\s*\=\s*([^;]*).*$)|^.*$/,"$1");""!=r&&o.setRequestHeader("Dm-Csrf",r),o.onreadystatechange=u,o.dmresolve=n,o.dmreject=a,o.dmurl=e,o.dmstarttime=performance.now(),o.send(t)})}function u(){var e,t=performance.now();this.readyState===this.DONE&&("true"===this.getResponseHeader("Dm-Client-Update")&&(r=!0),200===this.status?this.dmresolve(this):(418===this.status?(r=!1,ie("Due to a server software upgrade, this page will now be reloaded."),this.dmhandled=!0):403===this.status?(ie("CSRF error. This page will now be reloaded."),this.dmhandled=!0):401===this.status&&(h(),"/c/verifyOK"!==(e=window.location.pathname)&&"/c/ecdone"!==e&&0!==e.indexOf("/c/pwreset/")&&"/c/testdrive"!==e&&ye("/c/login"),this.dmhandled=!0),this.dmreject(this)),o.loggedIn&&function(e,t){var n=te(e);if(!m[n])return;var a={endpoint:te(e),timemsec:t},o=new XMLHttpRequest;o.open("POST","/latency",!0),o.setRequestHeader("Content-type","application/json;charset=UTF-8");var i=document.cookie.replace(/(?:(?:^|.*;\s*)dm_csrf\s*\=\s*([^;]*).*$)|^.*$/,"$1");""!=i&&o.setRequestHeader("Dm-Csrf",i);o.send(JSON.stringify(a))}(this.dmurl,Math.floor(t-this.dmstarttime)))}$(function(){(o={}).loggedIn=!1,o.firstName="",o.activities=[],r=!1,$("#dm-client-version").addClass("dm-gone"),i=$("#dm-client-version").text(),s=Handlebars.templates.dialog,Handlebars.registerPartial("signupPartial",Handlebars.templates.partialsignup),Handlebars.registerPartial("versionPartial",Handlebars.templates.partialversion),$("#dm-navbar").html(Handlebars.templates.navbar({})),$("#dm-menu-logout").click(function(){d("/logout","").then(function(){h(),$e("/c/login")},function(e){e.dmhandled||b("logout error "+e.status.toString()).then(function(){h(),$e("/c/login")})})}),$(".navbar-nav li a.dropdown-item").click(function(){$(".navbar-collapse").collapse("hide")}),$(".navbar-nav li a.collapser").click(function(){$(".navbar-collapse").collapse("hide")}),$("html").on("click, touchend",function(e){0==$(e.target).closest(".navbar").length&&$(".navbar-collapse").collapse("hide"),0==$(e.target).closest(".dropdown").length&&$(".dropdown-menu").filter(":visible").first().siblings(".dropdown-toggle").dropdown("toggle")});const e=a(S,{"/":k,"/c/login":x,"/c/signup":O,"/c/pending":N,"/c/verifyOK":D,"/c/forgot":C,"/c/forgotpending":T,"/c/pwreset/:token":J,"/c/home":R,"/c/about":P,"/c/testdrive":q,"/c/help":H,"/c/contact":M,"/c/plans":L,"/c/plandetails/:plan":Y,"/c/planday/:plan":A,"/c/version/:plan":j,"/c/profile":K,"/c/ecpending":F,"/c/ecdone":G,"/c/badprovider":V});var t=window.location.pathname,n=function(e,t){he&&console.log("spaInit - "+window.location.pathname+"  --  "+JSON.stringify(history.state));var n;be=e,window.onclick=De,window.onpopstate=Ne,window.onscroll=Oe,null!=history.state&&history.state.hasOwnProperty("path")&&history.state.path===window.location.pathname?n=history.state:(history.replaceState({scrollx:window.scrollX,scrolly:window.scrollY,path:window.location.pathname},"",window.location.pathname),n=null);t&&be(window.location.pathname);return n}(e,!1);d("/getstate","").then(function(e){return o.loggedIn=!0,f(JSON.parse(e.responseText)),e},function(e){return e}).then(function(a){window.location.pathname===t&&(e(t),null!=n&&Se(n.scrollx,n.scrolly)),g(),v()})});var m={login:!0,getdoc:!0,getstate:!0,actadd:!0,actdel:!0,actjump:!0,actver:!0,daychange:!0,accreset:!0,accenab:!0,userget:!0,userset:!0};function p(e,t,n){t.dmhandled||(t.responseText?$(e).html(t.responseText):$(e).html(n+" - error "+t.status.toString()),$(e).show())}function f(e){e.hasOwnProperty("firstname")&&(o.firstName=e.firstname),e.hasOwnProperty("activities")&&(o.activities=e.activities),g()}function h(){o.loggedIn=!1,g()}function g(){o.loggedIn?($("#user-dropdown").html(o.firstName),$("#nav-user-dropdown").removeClass("dm-gone"),$("#nav-login").addClass("dm-gone"),$("#nav-contact").removeClass("dm-gone")):($("#nav-user-dropdown").addClass("dm-gone"),$("#nav-login").removeClass("dm-gone"),$("#nav-contact").addClass("dm-gone"))}function v(){$("#dm-home-visible").length>0&&ye("/c/home");var e=new Date,t=1e3*(86400-(60*(60*e.getHours()+e.getMinutes())+e.getSeconds())),n=6e4+Math.floor(19*Math.random()*6e4);setTimeout(v,t+n)}function w(e){$("#main").html(e)}function b(e){return new l(function(t){$("#dm-modal").html(Handlebars.templates.modalalert({msg:e})),$(".modal").modal(),$(".modal").on("hidden.bs.modal",function(){$("#dm-modal").html(""),t()})})}function y(e){return new l(function(t,n){var a=!1;$("#dm-modal").html(Handlebars.templates.modalconfirm({msg:e})),$("#dm-modal-ok").click(function(){a=!0}),$(".modal").modal(),$(".modal").on("hidden.bs.modal",function(){$("#dm-modal").html(""),a?t():n()})})}function k(){o.loggedIn?ye("/c/home"):ye("/c/login")}function S(){document.title="Delight/Meditate - page not found",w("<br/><h1>PAGE NOT FOUND</h1>")}function O(){document.title="Delight/Meditate - signup",w(Handlebars.templates.signup({})),$("#signup-alert").hide(),$("#dm-signup-button").click(function(){B()}),$("#dm-login-button").click(function(){ye("/c/login")}),$("#dm-signup-panel").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),B())})}function N(){document.title="Delight/Meditate - email sent",w(s({msg:"You will receive an email shortly. Please follow its instructions, to activate your account."})),$("#dm-dialog-button").addClass("dm-gone")}function D(){document.title="Delight/Meditate - signup complete",w(s({msg:"Your account has been activated and is ready for you to log in!",buttonlabel:"Go to login page"})),$("#dm-dialog-button button").click(function(){ye("/c/login")}),$("#dm-dialog-button").removeClass("dm-gone")}function x(){r&&(r=!1,se("Due to a server software upgrade, this page will now be reloaded.")),document.title="Delight/Meditate - login",w(Handlebars.templates.login({})),$("#login-alert").hide(),$("#dm-about-button").click(function(){ye("/c/about")}),$("#dm-test-drive-button").click(function(){ye("/c/testdrive")}),$("#dm-login-button").click(function(){U()}),$("#dm-signup-button").click(function(){ye("/c/signup")}),$("#dm-login-panel").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),U())})}function C(){document.title="Delight/Meditate - forgot password",w(Handlebars.templates.forgot({})),$("#forgot-alert").hide(),$("#dm-forgot-button").click(function(){!function(){$("#forgot-alert").hide();var e={email:$("#prEmail").val()};d("/pwforgot",JSON.stringify(e)).then(function(){ye("/c/forgotpending")},function(e){p("#forgot-alert",e,"password recovery failed")})}()})}function T(){document.title="Delight/Meditate - password reset email sent",w(s({msg:"You will receive an email shortly. Please follow its instructions, to reset your password. If you don't see the email, check your spam folder."})),$("#dm-dialog-button").addClass("dm-gone")}function J(e){document.title="Delight/Meditate - password reset";var t=e.token;w(Handlebars.templates.pwreset(t)),$("#pwreset-alert").hide(),$("#dm-button-pwreset").click(function(){!function(){$("#pwreset-alert").hide();var e={token:$("#prToken").val(),password:$("#prPass").val()};d("/dorecover",JSON.stringify(e)).then(function(){b("Your password has been changed. Please log in with your new password.").then(function(){ye("/c/login")})},function(e){p("#pwreset-alert",e,"password reset failed")})}()})}function P(){document.title="Delight/Meditate - about",w(Handlebars.templates.about({})),o.loggedIn?$(".dm-visitor-only").addClass("dm-gone"):$("#dm-test-drive-button").click(function(){ye("/c/testdrive")}),$("#dm-help-button").click(function(){ye("/c/help")})}function H(){document.title="Delight/Meditate - help",w(Handlebars.templates.help({}))}function M(){document.title="Delight/Meditate - contact",w(Handlebars.templates.contact({})),$("#contact-alert").hide(),$("#dm-contact-button").click(function(){!function(){$("#contact-alert").hide();var e={msg:$("#contactText").val()};d("/contact",JSON.stringify(e)).then(function(){b("Your message has been sent.").then(function(){window.history.back()})},function(e){p("#contact-alert",e,"problem sending message")})}()}),$("#dm-contact-cancel").click(function(){window.history.back()})}function R(e,t,n,a,i,c,u,m){r&&(r=!1,se("Due to a server software upgrade, this page will now be reloaded."));var p=!1;if(void 0!==a&&a&&(p=!0),0==o.activities.length)return document.title="Delight/Meditate - home",w(s({msg:"You don't currently have any reading plans.",buttonlabel:"Add a plan"})),$("#dm-dialog-button button").click(function(){ye("/c/plans")}),void $("#dm-dialog-button").removeClass("dm-gone");var f=!1;void 0!==m&&(f=!0);var h=[],g=0,v=o.activities.map(function(e){return de("plan",e.plan).then(function(e){var t=JSON.parse(e);return l.all(t.streams.map(ue))})});v.push(de("queries","providers")),l.all(v).then(function(){for(var e,t,n,a=JSON.parse(ce("queries","providers")),r=0;r<o.activities.length;r++){var s=o.activities[r],v=JSON.parse(ce("plan",s.plan));if(s.plantitle=v.title,s.actindex=r,s.status="",s.statusgone="",s.ontrack="",s.accvisible){s.showduedate="Turn off Accountability",s.armenuhide="";var k=(ae()-s.accstartdate+1)*s.day.length-I(s);s.status=k>0?"Readings due now: "+k:0===k?"You are up to date.":"You are ahead by: "+-k,k<=0&&(s.ontrack="dm-panel-ontrack")}else s.showduedate="Turn on Accountability",s.armenuhide="dm-gone",s.statusgone="dm-gone";s.daysleft=Math.ceil((v.days*s.day.length-I(s))/s.day.length),s.readings=[];for(var S=0;S<s.day.length;S++){var O=s.day[S],N=ce("stream",v.streams[S]).split("\n"),D=O==v.days+1?"[done]":N[O-1],x={};if(x.plan=s.plan,x.plandays=v.days,x.actindex=r,x.streamindex=S,x.citleft=x.citright=fe(D),x.tctxl=x.tctxr="Day "+O,f&&r===i&&S===c){var C="Day "+u+":";"L"===m?(x.citleft=fe(N[u-1]),x.tctxl=C):(x.citright=fe(N[u-1]),x.tctxr=C)}x.ltriangle=x.rtriangle="dm-triangle",1==O&&(x.ltriangle="dm-triangle-greyed"),O==v.days+1&&(x.rtriangle="dm-triangle-greyed");for(var T=!1,J=0;J<a.providers.length;J++)if(a.providers[J].provider==s.provider){x.citurlindex=g,h[g++]=(e=a.providers[J].url,t=s.version,n=D,void 0,e.replace("{{version}}",t).replace("{{citation}}",n)),T=!0;break}T||(h[g++]="/c/badprovider"),s.readings[S]=x}o.activities[r]=s}if(w(Handlebars.templates.home(o)),p?(document.title="Delight/Meditate - test drive",$(".dm-home-plan-dropdown").remove(),E(),$("#dm-testdrive").removeClass("dm-gone"),$("#dm-testdrive-ok").click(function(){window.history.back()})):(document.title="Delight/Meditate - home",$(".dm-home-testdrive-dropdown").remove()),$(".dm-cit-left").click(function(){ee(h[Number($(this).closest(".dm-citation").prop("id").substr(7))])}),f){var P="";P="L"===m?"dm-wipeleft":"dm-wiperight";var H=$("#dm-cit-L-"+i+"-"+c),M=$("#dm-cit-R-"+i+"-"+c),q=H.clone(!0).addClass(P),L=M.clone(!0).addClass(P);"L"===m&&(q.addClass("dm-noclick"),L.removeClass("dm-noclick"),L.click(function(){ee(h[Number($(this).closest(".dm-citation").prop("id").substr(7))])})),q.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){var t;p&&(t=500,new l(function(e){setTimeout(function(){e()},t)})).then(function(){switch(I(o.activities[0])){case 0:o.testdrivemsg=1;break;case 1:o.testdrivemsg=2;break;default:o.testdrivemsg=3}E()})}),M.before(L),M.remove(),H.before(q),H.remove();var Y=$("#dm-tctx-L-"+i+"-"+c),A=$("#dm-tctx-R-"+i+"-"+c),j=Y.clone(!0).addClass(P),K=A.clone(!0).addClass(P);Y.before(j),Y.remove(),A.before(K),A.remove()}$(".dm-acctoggle").click(function(){!function(e){var t=Z(e);if(-1===t)return;var n=!o.activities[t].accvisible,a={plan:e,enabled:n};d("/accenab",JSON.stringify(a)).then(function(t){Q(e,t.responseText),R()},function(e){e.dmhandled||b("couldn't toggle accountability - "+e.status.toString())})}($(this).prop("id").substr(13))}),$(".dm-accreset").click(function(){var e;e=$(this).prop("id").substr(12),y("Reset the due dates for this plan, to make your current reading(s) due today?").then(function(){var t={plan:e,today:ae()};d("/accreset",JSON.stringify(t)).then(function(t){Q(e,t.responseText),R()},function(e){e.dmhandled||b("couldn't reset accountability - "+e.status.toString())})})}),$(".dm-delplan").click(function(){var e;e=$(this).prop("id").substr(11),y("Delete this plan? (If you change your mind, you can add it again at any time.)").then(function(){var t={plan:e};d("/actdel",JSON.stringify(t)).then(function(){var t=Z(e);-1!==t&&(o.activities.splice(t,1),$e("/c/home"))},function(e){e.dmhandled||b("couldn't delete plan - "+e.status.toString())})})}),$(".dm-move").click(function(){var e=$(this).prop("id").split("-"),t="L"===e[1]?-1:1,n=Number(e[2]),a=Number(e[3]),i=Number(e[4]);if(p){var r=o.activities[n].day[a];-1==t&&r>1&&(o.activities[n].day[a]--,R({},{},{},!0,n,a,r,"R")),1==t&&r<=i&&(o.activities[n].day[a]++,R({},{},{},!0,n,a,r,"L"))}else!function(e,t,n){var a=o.activities[e].day[t],i=o.activities[e].plan,r={plan:i,streamindex:t,prevday:a,delta:n,today:ae()};d("/daychange",JSON.stringify(r)).then(function(n){Q(i,n.responseText);var r=o.activities[e].day[t];r===a+1?R({},{},{},!1,e,t,a,"L"):r===a-1?R({},{},{},!1,e,t,a,"R"):R()},function(e){e.dmhandled||b("move failed - "+e.status.toString()+" - "+e.responseText)})}(n,a,t)})})}function I(e){for(var t=0,n=0;n<e.day.length;n++)t+=e.day[n]-1;return t}function q(){o.activities=[{plan:"mcheyne-2yr-2perday",day:[1,1],version:"ESV",provider:"BibleGateway.com-PRINT",accstartdate:ae()-1+1,accvisible:!0}],o.testdrivemsg=1,R(0,0,0,!0)}function E(){for(var e=1;e<=3;e++)o.testdrivemsg===e?$("#dm-testdrive-msg-"+e).removeClass("dm-gone"):$("#dm-testdrive-msg-"+e).addClass("dm-gone")}function L(){de("queries","plandescs").then(function(e){var t=JSON.parse(e);if(document.title="Delight/Meditate - plans",w(Handlebars.templates.plans(t)),$(".dm-plan-details-button").click(function(){ye("/c/plandetails/"+$(this).prop("id").substr(7))}),o.loggedIn){$(".dm-plan-add-button button").click(function(){var e,t;e=$(this).prop("id").substr(11),t={plan:e,today:ae()},d("/actadd",JSON.stringify(t)).then(function(e){f(JSON.parse(e.responseText)),ye("/c/home")},function(e){e.dmhandled||b("couldn't add plan - "+e.status.toString())})});for(var n=0;n<o.activities.length;n++)$("#pb-"+o.activities[n].plan).addClass("dm-gone")}else $(".dm-plan-add-button").addClass("dm-gone"),$(".dm-plan-login-button").removeClass("dm-gone"),$(".dm-plan-login-button button").click(function(){ye("/c/login")})})}function Y(e){var t,n;de("plan",e.plan).then(function(e){var a=JSON.parse(e);return t=a.days,n=a.title,l.all(a.streams.map(ue))}).then(function(e){for(var a=[],o=0;o<e.length;o++)a[o]=e[o].split("\n");var i={};i.title=n,i.days=t,i.rows=[];for(var r=0;r<t;r++){var s={};s.day=r+1,s.readings=[];for(var l=0;l<e.length;l++)s.readings[l]=a[l][r];i.rows[r]=s}document.title="Delight/Meditate - plan details",w(Handlebars.templates.plandetails(i)),$("#dm-plandetails-ok").click(function(){window.history.back()})})}function A(e){var t=e.plan,n=Z(t);-1!==n&&de("plan",t).then(function(e){var a=JSON.parse(e),i={};i.plan=t,i.totaldays=a.days,i.plantitle=a.title,i.day=o.activities[n].day[0];for(var r=1;r<o.activities[n].day.length;r++){var s=o.activities[n].day[r];s<i.day&&(i.day=s)}document.title="Delight/Meditate - jump to a specific day",w(Handlebars.templates.planday(i)),$(".dm-planday").click(function(){_($(this).prop("id").substr(11))}),$("#dm-planday-panel").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),_($(this).find(".dm-planday").prop("id").substr(11)))}),$(".dm-plandet").click(function(){ye("/c/plandetails/"+$(this).prop("id").substr(11))}),$("#dm-planday-cancel").click(function(){window.history.back()}),$("#planday-alert").hide()})}function j(e){var t=e.plan,n=Z(t);-1!==n&&l.all([de("plan",t),de("queries","providers")]).then(function(e){var a=JSON.parse(e[0]),i={};i.plan=t,i.plantitle=a.title,i.version=o.activities[n].version,i.choices=W(e[1],o.activities[n].provider),document.title="Delight/Meditate - change Bible version",w(Handlebars.templates.version(i)),$(".dm-newver").click(function(){z($(this).prop("id").substr(10))}),$("#dm-version-panel").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),z($(this).find(".dm-newver").prop("id").substr(10)))}),$("#dm-newver-cancel").click(function(){window.history.back()}),$("#version-alert").hide()})}function K(){l.all([d("/userget",""),de("queries","providers")]).then(function(e){var t=JSON.parse(e[0].responseText),n={};n.firstname=t.firstname,n.lastname=t.lastname,n.email=t.email,n.version=t.version,n.choices=W(e[1],t.provider),document.title="Delight/Meditate - profile",w(Handlebars.templates.profile(n)),$("#profile-alert").hide(),$("#dm-user-profile").click(function(){X()}),$("#dm-profile-panel").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),X())}),$("#dm-profile-cancel").click(function(){window.history.back()})},function(e){e[0].dmhandled||(e[0].hasOwnProperty("responseText")?b("profile fetch failed - "+e.responseText):e[0].hasOwnProperty("status")?b("profile fetch failed - "+e.status.toString()):b("profile fetch failed"))})}function F(){document.title="Delight/Meditate - email change sent",w(s({msg:"You will receive an email shortly. Please follow its instructions, to verify your new email address.",buttonlabel:"OK"})),$("#dm-dialog-button button").click(function(){ye("/c/home")}),$("#dm-dialog-button").removeClass("dm-gone")}function G(){document.title="Delight/Meditate - email change completed",w(s({msg:"Your email address change has been confirmed! Please log in with your new email address.",buttonlabel:"Go to login page"})),$("#dm-dialog-button button").click(function(){ye("/c/login")}),$("#dm-dialog-button").removeClass("dm-gone")}function V(){document.title="Delight/Meditate - problem with Bible provider",w(s({msg:"There is a problem with this Bible provider. Please click the 3-dot menu for this plan, choose Change Bible Version, and select a new Bible provider.",buttonlabel:"OK"})),$("#dm-dialog-button button").click(function(){window.close()}),$("#dm-dialog-button").removeClass("dm-gone")}function B(){$("#signup-alert").hide();var e={firstname:$("#sfFirst").val(),lastname:$("#sfLast").val(),email:$("#sfEmail").val(),password:$("#sfPass").val()};d("/signup",JSON.stringify(e)).then(function(){$e("/c/pending")},function(e){p("#signup-alert",e,"signup failed")})}function U(){$("#login-alert").hide();var e={email:$("#lfEmail").val(),password:$("#lfPass").val(),keep:$("#lfKeep").is(":checked")};d("/login",JSON.stringify(e)).then(function(e){o.loggedIn=!0,f(JSON.parse(e.responseText)),ye("/c/home")},function(e){p("#login-alert",e,"login failed")})}function X(){var e=$("#sfFirst").val(),t={email:$("#sfEmail").val(),oldpass:$("#oldPass").val(),newpass:$("#newPass").val(),firstname:e,lastname:$("#sfLast").val(),version:$("#bvVersion").val(),provider:$("#bvProvider").val()};d("/userset",JSON.stringify(t)).then(function(e){var t=JSON.parse(e.responseText);o.firstName=t.firstname,g(),t.logout&&h(),t.emailsent?ye("/c/ecpending"):t.pwchanged?b("Your password has been changed. Please log in with your new password.").then(function(){ye("/c/login")}):ye("/c/home")},function(e){p("#profile-alert",e,"problem updating profile")})}function _(e){var t={plan:e,day:Number($("#pdfDay").val()),today:ae()};d("/actjump",JSON.stringify(t)).then(function(t){Q(e,t.responseText),window.history.back()},function(e){p("#planday-alert",e,"could not change day")})}function z(e){var t={plan:e,provider:$("#bvProvider").val(),version:$("#bvVersion").val()};d("/actver",JSON.stringify(t)).then(function(){var n=Z(e);-1!==n&&(o.activities[n].provider=t.provider,o.activities[n].version=t.version,window.history.back())},function(e){p("#version-alert",e,"could not change version")})}function Z(e){for(var t=0;t<o.activities.length;t++)if(o.activities[t].plan===e)return t;return console.log("delightmeditate - actindex("+e+") - not found"),-1}function Q(e,t){var n=JSON.parse(t),a=Z(e);if(-1===a)return 0;o.activities[a].day=n.day,o.activities[a].accstartdate=n.accstartdate,o.activities[a].accvisible=n.accvisible}function W(e,t){for(var n=JSON.parse(e),a=[],o=0;o<n.providers.length;o++)a[o]={},a[o].provider=n.providers[o].provider,a[o].selected="",a[o].provider===t&&(a[o].selected="selected");return a}function ee(e){window.open(e,"_blank")}function te(e){"/"===e.charAt(0)&&(e=e.substr(1));var t=e.indexOf("/");return-1!=t&&(e=e.substr(0,t)),e}function ne(){var e=(new Date).getTimezoneOffset();return Math.floor(Date.now()/1e3-60*e)}function ae(){return Math.floor(ne()/86400)}function oe(){localStorage.setItem(c,ne().toString()),history.replaceState({},"","/"),window.location.reload(!0)}function ie(e){b(e).then(function(){oe()})}const re=3600;function se(e){var t=localStorage.getItem(c);if(null!=t){var n=parseInt(t,10);ne()-n<re?b(e).then(function(){oe()}):oe()}else oe()}var le={};function ce(e,t){return le[e+"/"+t]}function de(e,t){var n=e+"/"+t,a="exp/"+n;if(le.hasOwnProperty(a)&&le[a]>ne()&&le.hasOwnProperty(n))return l.resolve(le[n]);var o,r=localStorage.getItem(a);if(null!=r&&Number(r)>ne()){var s=localStorage.getItem(n);if(null!=s)return le[n]=s,le[a]=Number(r),l.resolve(s)}return(o="/getdoc/"+e+"/"+t,new l(function(e,t){var n=new XMLHttpRequest;n.open("GET",o),n.setRequestHeader("Dm-Client-Version",i),n.onreadystatechange=u,n.dmresolve=e,n.dmreject=t,n.dmurl=o,n.dmstarttime=performance.now(),n.send()})).then(function(e){var t=JSON.parse(e.responseText),o=t.ttl+ne();return localStorage.setItem(n,t.data),localStorage.setItem(a,o.toString()),le[n]=t.data,le[a]=o,t.data},function(e){return e.dmhandled?"":b("doc not found - "+n+" - "+e.status.toString()).then(function(){return""})})}function ue(e){return de("stream",e)}var me=["1Chronicles","1Corinthians","1John","1Kings","1Peter","1Samuel","1Thess","1Timothy","2Chronicles","2Corinthians","2John","2Kings","2Peter","2Samuel","2Thess","2Timothy","3John","Acts","Amos","Colossians","Daniel","Deuteronomy","Ecclesiastes","Ephesians","Esther","Exodus","Ezekiel","Ezra","Galatians","Genesis","Habakkuk","Haggai","Hebrews","Hosea","Isaiah","James","Jeremiah","Job","Joel","John","Jonah","Joshua","Jude","Judges","Lamentations","Leviticus","Luke","Malachi","Mark","Matthew","Micah","Nahum","Nehemiah","Numbers","Obadiah","Philippians","Philemon","Proverbs","Psalm","Revelation","Romans","Ruth","Song","Titus","Zechariah","Zephaniah"];function pe(e){for(var t=0;t<me.length;t++)if(0===me[t].lastIndexOf(e,0))return me[t];return e}function fe(e){var t=e.indexOf(" ");return-1===t?pe(e):pe(e.slice(0,t))+"<br/>"+e.slice(t+1)}var he=!1;const ge=50,ve=5e3,we=100;var be;function ye(e){he&&console.log("spaVisit - "+e),ke(),history.pushState({scrollx:0,scrolly:0,path:e},"",e),window.scrollTo(0,0),be(e)}function $e(e){he&&console.log("spaReplace - "+e),history.replaceState({scrollx:0,scrolly:0,path:e},"",e),window.scrollTo(0,0),be(e)}function ke(){he&&console.log("spaSaveScroll - "+window.scrollY),history.replaceState({scrollx:window.scrollX,scrolly:window.scrollY,path:history.state.path},"",history.state.path)}function Se(e,t){he&&console.log("spaScrollTo",e,t);var n=Date.now();!function a(){window.scrollTo(e,t),window.scrollX===e&&window.scrollY===t||Date.now()-n>ve||setTimeout(a,ge)}()}function Oe(){he&&console.log("spaScroll event"),window.onscroll=null,setTimeout(function(){ke(),window.onscroll=Oe},we)}function Ne(e){he&&console.log("spaPop event"),be(e.state.path),Se(e.state.scrollx,e.state.scrolly)}function De(e){if(!e.defaultPrevented&&1===function(e){return null===(e=e||window.event).which?e.button:e.which}(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;if(t&&"A"===t.nodeName&&!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var n=t.getAttribute("href");n&&n.indexOf("mailto:")>-1||t.target||function(e){var t=location.protocol+"//"+location.hostname;location.port&&(t+=":"+location.port);return e&&0===e.indexOf(t)}(t.href)&&(e.preventDefault(),ye(t.pathname))}}}},{bootstrap:3,"es6-promise":4,"handlebars/runtime":23,jquery:24,"rlite-router":25,tether:26}]},{},[1]);